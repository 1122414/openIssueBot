{% extends "base.html" %}

{% block title %}关于 - OpenIssueBot{% endblock %}

{% block extra_head %}
<style>
.hero-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 15px;
    padding: 3rem 2rem;
}

.feature-card {
    transition: all 0.3s ease;
    border: none;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.feature-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.15);
}

.feature-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    margin: 0 auto 1rem;
}

.tech-badge {
    background: linear-gradient(45deg, #007bff, #0056b3);
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    margin: 0.25rem;
    display: inline-block;
}

.timeline {
    position: relative;
    padding-left: 2rem;
}

.timeline::before {
    content: '';
    position: absolute;
    left: 0.5rem;
    top: 0;
    bottom: 0;
    width: 2px;
    background: #007bff;
}

.timeline-item {
    position: relative;
    margin-bottom: 2rem;
}

.timeline-item::before {
    content: '';
    position: absolute;
    left: -1.75rem;
    top: 0.5rem;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #007bff;
}

.code-example {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 1rem;
    font-family: 'Courier New', monospace;
    font-size: 0.875rem;
}

.stats-card {
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
    color: white;
    border-radius: 10px;
    padding: 1.5rem;
    text-align: center;
}

.contributor-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: 3px solid #fff;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
</style>
{% endblock %}

{% block content %}
<!-- 项目介绍 -->
<div class="row mb-5">
    <div class="col-12">
        <div class="hero-section text-center">
            <h1 class="display-4 mb-3">
                <i class="bi bi-robot"></i> OpenIssueBot
            </h1>
            <p class="lead mb-4">
                基于 RAG 和大语言模型的智能 GitHub Issues 搜索与分析系统
            </p>
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <p class="mb-4">
                        OpenIssueBot 是一个创新的开源项目，旨在通过先进的检索增强生成（RAG）技术和大语言模型，
                        为开发者提供智能化的 GitHub Issues 搜索和问题解决方案。
                    </p>
                </div>
            </div>
            <div class="d-flex justify-content-center gap-3">
                <a href="{{ url_for('search_page') }}" class="btn btn-light btn-lg">
                    <i class="bi bi-search"></i> 开始搜索
                </a>
                <a href="https://github.com/your-username/openIssueBot" target="_blank" class="btn btn-outline-light btn-lg">
                    <i class="bi bi-github"></i> GitHub
                </a>
            </div>
        </div>
    </div>
</div>

<!-- 核心功能 -->
<div class="row mb-5">
    <div class="col-12">
        <h2 class="text-center mb-4">
            <i class="bi bi-star"></i> 核心功能
        </h2>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card feature-card h-100">
            <div class="card-body text-center">
                <div class="feature-icon bg-primary text-white">
                    <i class="bi bi-search"></i>
                </div>
                <h5 class="card-title">智能搜索</h5>
                <p class="card-text">
                    基于向量相似度的语义搜索，能够理解问题的深层含义，
                    找到最相关的 Issues 和解决方案。
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card feature-card h-100">
            <div class="card-body text-center">
                <div class="feature-icon bg-success text-white">
                    <i class="bi bi-robot"></i>
                </div>
                <h5 class="card-title">AI 分析</h5>
                <p class="card-text">
                    集成 OpenAI GPT 模型，提供智能问题分析、解决方案生成
                    和代码建议，让问题解决更高效。
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card feature-card h-100">
            <div class="card-body text-center">
                <div class="feature-icon bg-info text-white">
                    <i class="bi bi-lightning"></i>
                </div>
                <h5 class="card-title">高性能</h5>
                <p class="card-text">
                    使用 FAISS 向量数据库实现毫秒级搜索响应，
                    支持大规模 Issues 数据的高效检索。
                </p>
            </div>
        </div>
    </div>
</div>

<!-- 技术架构 -->
<div class="row mb-5">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h3 class="mb-0">
                    <i class="bi bi-cpu"></i> 技术架构
                </h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h5>核心技术栈</h5>
                        <div class="mb-3">
                            <span class="tech-badge">Python 3.8+</span>
                            <span class="tech-badge">Flask</span>
                            <span class="tech-badge">FAISS</span>
                            <span class="tech-badge">SentenceTransformers</span>
                            <span class="tech-badge">OpenAI API</span>
                            <span class="tech-badge">Bootstrap 5</span>
                        </div>
                        
                        <h6>RAG 架构组件</h6>
                        <ul class="list-unstyled">
                            <li><i class="bi bi-check-circle text-success"></i> 文档检索 (Retrieval)</li>
                            <li><i class="bi bi-check-circle text-success"></i> 内容增强 (Augmentation)</li>
                            <li><i class="bi bi-check-circle text-success"></i> 智能生成 (Generation)</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5>系统架构图</h5>
                        <div class="code-example">
                            <pre>用户查询
    ↓
文本预处理
    ↓
向量化编码 (SentenceTransformers)
    ↓
FAISS 相似度搜索
    ↓
结果排序与过滤
    ↓
LLM 增强分析 (OpenAI)
    ↓
结果展示</pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 使用指南 -->
<div class="row mb-5">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h3 class="mb-0">
                    <i class="bi bi-book"></i> 使用指南
                </h3>
            </div>
            <div class="card-body">
                <div class="timeline">
                    <div class="timeline-item">
                        <h5>1. 配置 GitHub 访问</h5>
                        <p>在配置页面设置 GitHub Personal Access Token 和目标仓库，确保有足够的权限访问 Issues 数据。</p>
                        <div class="code-example">
                            <code>权限要求: repo (完整仓库访问权限)</code>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <h5>2. 初始化搜索引擎</h5>
                        <p>系统会自动抓取 Issues 数据，构建向量索引。首次运行可能需要几分钟时间。</p>
                        <div class="code-example">
                            <code>python main.py init --repo owner/repository</code>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <h5>3. 开始智能搜索</h5>
                        <p>输入问题描述或错误信息，系统会返回最相关的 Issues 和 AI 生成的解决建议。</p>
                        <div class="code-example">
                            <code>示例: "ImportError: No module named 'requests'"</code>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <h5>4. 配置 AI 增强 (可选)</h5>
                        <p>设置 OpenAI API Key 以启用智能分析功能，获得更准确的问题诊断和解决方案。</p>
                        <div class="code-example">
                            <code>支持模型: GPT-3.5-turbo, GPT-4, GPT-4-turbo</code>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 项目统计 -->
<div class="row mb-5">
    <div class="col-md-3 mb-3">
        <div class="stats-card">
            <h3 class="mb-1">{{ project_stats.total_issues or '0' }}</h3>
            <p class="mb-0">已索引 Issues</p>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="stats-card">
            <h3 class="mb-1">{{ project_stats.search_count or '0' }}</h3>
            <p class="mb-0">搜索次数</p>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="stats-card">
            <h3 class="mb-1">{{ project_stats.avg_response_time or '0' }}ms</h3>
            <p class="mb-0">平均响应时间</p>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="stats-card">
            <h3 class="mb-1">{{ project_stats.accuracy_rate or '0' }}%</h3>
            <p class="mb-0">搜索准确率</p>
        </div>
    </div>
</div>

<!-- 学习资源 -->
<div class="row mb-5">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h3 class="mb-0">
                    <i class="bi bi-mortarboard"></i> 学习资源
                </h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h5>RAG 技术学习</h5>
                        <ul>
                            <li><a href="https://arxiv.org/abs/2005.11401" target="_blank">RAG 原始论文</a></li>
                            <li><a href="https://huggingface.co/docs/transformers/model_doc/rag" target="_blank">HuggingFace RAG 文档</a></li>
                            <li><a href="https://www.pinecone.io/learn/retrieval-augmented-generation/" target="_blank">RAG 实践指南</a></li>
                        </ul>
                        
                        <h5>向量数据库</h5>
                        <ul>
                            <li><a href="https://github.com/facebookresearch/faiss" target="_blank">FAISS 官方文档</a></li>
                            <li><a href="https://www.sbert.net/" target="_blank">Sentence-BERT</a></li>
                            <li><a href="https://platform.openai.com/docs/guides/embeddings" target="_blank">OpenAI Embeddings</a></li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5>大语言模型</h5>
                        <ul>
                            <li><a href="https://platform.openai.com/docs" target="_blank">OpenAI API 文档</a></li>
                            <li><a href="https://arxiv.org/abs/2005.14165" target="_blank">GPT-3 论文</a></li>
                            <li><a href="https://huggingface.co/transformers/" target="_blank">Transformers 库</a></li>
                        </ul>
                        
                        <h5>项目实践</h5>
                        <ul>
                            <li><a href="#" onclick="showCodeExample()">代码示例</a></li>
                            <li><a href="{{ url_for('config_page') }}">配置指南</a></li>
                            <li><a href="#" onclick="showAPIDoc()">API 文档</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 开发团队 -->
<div class="row mb-5">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h3 class="mb-0">
                    <i class="bi bi-people"></i> 开发团队
                </h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="d-flex align-items-center mb-3">
                            <img src="https://via.placeholder.com/50" alt="Developer" class="contributor-avatar me-3">
                            <div>
                                <h6 class="mb-1">项目作者</h6>
                                <p class="text-muted mb-0">AI & 机器学习工程师</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6>贡献方式</h6>
                        <ul class="list-unstyled">
                            <li><i class="bi bi-github"></i> <a href="https://github.com/your-username/openIssueBot" target="_blank">提交 Issue</a></li>
                            <li><i class="bi bi-code-slash"></i> <a href="https://github.com/your-username/openIssueBot/pulls" target="_blank">提交 PR</a></li>
                            <li><i class="bi bi-star"></i> <a href="https://github.com/your-username/openIssueBot" target="_blank">Star 项目</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 版本信息 -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h3 class="mb-0">
                    <i class="bi bi-info-circle"></i> 版本信息
                </h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h6>当前版本</h6>
                        <p class="mb-0">v1.0.0</p>
                    </div>
                    <div class="col-md-4">
                        <h6>发布日期</h6>
                        <p class="mb-0">2024年1月</p>
                    </div>
                    <div class="col-md-4">
                        <h6>许可证</h6>
                        <p class="mb-0">MIT License</p>
                    </div>
                </div>
                
                <hr>
                
                <h6>更新日志</h6>
                <ul>
                    <li><strong>v1.0.0</strong> - 初始版本发布，包含核心搜索和AI分析功能</li>
                    <li><strong>v0.9.0</strong> - Beta版本，添加Web界面和配置管理</li>
                    <li><strong>v0.8.0</strong> - Alpha版本，实现基础RAG架构</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- 模态框 -->
<div class="modal fade" id="codeExampleModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">代码示例</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="code-example">
                    <pre><code># 基本使用示例
from app import IssueSearchEngine

# 初始化搜索引擎
engine = IssueSearchEngine()
engine.initialize("owner/repository")

# 执行搜索
results = engine.search(
    query="ImportError: No module named 'requests'",
    search_type="vector",
    max_results=5
)

# 获取AI分析
analysis = engine.get_llm_analysis(
    query="如何解决模块导入错误？",
    context=results
)

print(f"找到 {len(results)} 个相关结果")
print(f"AI建议: {analysis['answer']}")</code></pre>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="apiDocModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">API 文档</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <h6>搜索 API</h6>
                <div class="code-example mb-3">
                    <pre><code>POST /api/search
Content-Type: application/json

{
  "query": "搜索内容",
  "search_type": "vector",
  "max_results": 5,
  "similarity_threshold": 0.3,
  "include_llm_analysis": true
}</code></pre>
                </div>
                
                <h6>配置 API</h6>
                <div class="code-example mb-3">
                    <pre><code>GET /api/config
POST /api/config

# 获取系统状态
GET /api/status

# 清空缓存
POST /api/clear-cache</code></pre>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
function showCodeExample() {
    new bootstrap.Modal(document.getElementById('codeExampleModal')).show();
}

function showAPIDoc() {
    new bootstrap.Modal(document.getElementById('apiDocModal')).show();
}

// 加载项目统计数据
fetch('/api/stats')
.then(response => response.json())
.then(data => {
    if (data.success) {
        // 更新统计数据显示
        console.log('项目统计:', data.stats);
    }
})
.catch(error => {
    console.log('无法加载统计数据:', error);
});
</script>
{% endblock %}